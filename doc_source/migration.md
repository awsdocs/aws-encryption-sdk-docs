# Migrating to AWS Encryption SDK Version 2\.0\.*x*<a name="migration"></a>

The AWS Encryption SDK supports multiple interoperable [programming language implementations](programming-languages.md), each of which is developed in an open\-source repository on GitHub\. As a [best practice](best-practices.md), we recommend that you use the latest version of the AWS Encryption SDK for each language\. However, the 2\.0\.*x* version of the AWS Encryption SDK introduces significant new security features, some of which are breaking changes\. To provide a safe upgrade path to version 2\.0\.*x*, we provide a transition version, 1\.7\.*x*, in each programming language\. The topics in this section are designed to help you understand the changes, select the correct version for your application, and migrate safely and successfully to version 2\.0\.*x*\.

For information about significant versions of the AWS Encryption SDK, see [Versions of the AWS Encryption SDK](about-versions.md)\.

**Important**  
If you upgrade directly to version 2\.0\.*x* and enable all new features immediately, the AWS Encryption SDK won't be able to decrypt ciphertext encrypted under older versions of the AWS Encryption SDK

**Note**  
AWS Encryption CLI: When reading this migration guide, use the 1\.7\.*x* migration instructions for AWS Encryption CLI 1\.8\.*x* and use the 2\.0\.*x* migration instructions for AWS Encryption CLI 2\.1\.*x*\. For details, see [ Versions of the AWS Encryption CLIVersions  Describes the versions of the AWS Encryption CLI\.   We recommend that you use the latest version of the AWS Encryption CLI\. If you're using a version of the AWS Encryption CLI older than 2\.1\.*x*, we recommend that you upgrade to version 1\.8\.*x* and then to version 2\.1\.*x* as soon as possible\. In version 2\.1\.*x*, the AWS Encryption CLI introduces support for significant new security features that meet [AWS Encryption SDK best practices](best-practices.md)\. These new features cause breaking changes that will require updates to your commands and scripts\. To make migration to version 2\.1\.*x* easier, we provide a transition version, 1\.8\.*x* that lets you prepare your commands and scripts for 2\.1\.*x*\. Features that are deprecated in version 1\.8\.*x* are removed in version 2\.1\.*x*\. New security features were originally released in AWS Encryption CLI versions 1\.7\.*x* and 2\.0\.*x*\. However, AWS Encryption CLI version 1\.8\.*x* replaces version 1\.7\.*x* and AWS Encryption CLI 2\.1\.*x* replaces 2\.0\.*x*\. For details, see the relevant [security advisory](https://github.com/aws/aws-encryption-sdk-cli/security/advisories/GHSA-2xwp-m7mq-7q3r) in the [aws\-encryption\-sdk\-cli](https://github.com/aws/aws-encryption-sdk-cli/) repository on GitHub\. For information about significant versions of the AWS Encryption SDK, see [Versions of the AWS Encryption SDK](about-versions.md)\. **Which version do I use?** If you're new to the AWS Encryption CLI, use the latest version\. To decrypt data encrypted by a version of the AWS Encryption SDK earlier than version 1\.7\.*x*, start with version 1\.8\.*x*\. Make [all recommended changes](migration-guide.md) before updating to version 2\.1\.*x* or later\. Otherwise, you can begin with the latest available version of the AWS Encryption CLI\. **Learn more**   For detailed information about the changes and guidance for migrating to these new versions, see [Migrating to version 2\.0\.*x*](migration.md)\.   For descriptions of the new AWS Encryption CLI parameters and attributes, see [AWS Encryption SDK CLI syntax and parameter reference](crypto-cli-reference.md)\.   The following lists describe the change to the AWS Encryption CLI in versions 1\.8\.*x* and 2\.1\.*x*\.  Version 1\.8\.*x* changes to the AWS Encryption CLI    Deprecates the `--master-keys` parameter\. Instead, use the `--wrapping-keys` parameter\.   Adds the `--wrapping-keys` \(`-w`\) parameter\. It supports all attributes of the `--master-keys` parameter\. It also adds the following optional attributes, which are valid only when decrypting with AWS KMS keys\.   **discovery**   **discovery\-partition**   **discovery\-account**   For custom master key providers, `--encrypt` and \-`-decrypt` commands require either a `--wrapping-keys` parameter or a `--master-keys` parameter \(but not both\)\. Also, an `--encrypt` command with AWS KMS keys requires either a `--wrapping-keys` parameter or a `--master-keys` parameter \(but not both\)\.  In a `--decrypt` command with AWS KMS keys, the `--wrapping-keys` parameter is optional, but recommended, because it is required in version 2\.1\.*x*\. If you use it, you must specify either the **key** attribute or the **discovery** attribute with a value of `true` \(but not both\)\.   Adds the `--commitment-policy` parameter\. The only valid value is `forbid-encrypt-allow-decrypt`\. The `forbid-encrypt-allow-decrypt` commitment policy is used in all encrypt and decrypt commands\. In version 1\.8\.*x*, when you use the `--wrapping-keys` parameter, a `--commitment-policy` parameter with the `forbid-encrypt-allow-decrypt` value is required\. Setting the value explicitly prevents your [commitment policy](concepts.md#commitment-policy) from changing automatically to `require-encrypt-require-decrypt` when you upgrade to version 2\.1\.*x*\.     Version 2\.1\.*x* changes to the AWS Encryption CLI    Removes the `--master-keys` parameter\. Instead, use the `--wrapping-keys` parameter\.   The `--wrapping-keys` parameter is required in all encrypt and decrypt commands\. You must specify either a **key** attribute or a **discovery** attribute with a value of `true` \(but not both\)\.   The `--commitment-policy` parameter supports the following values\. For details, see [Setting your commitment policy](migrate-commitment-policy.md)\.   `forbid-encrypt-allow-decrypt`   `require-encrypt-allow-decrypt`   `require-encrypt-require decrypt` \(Default\)     The `--commitment-policy` parameter is optional in version 2\.1\.*x*\. The default value is `require-encrypt-require-decrypt`\.     Version 1\.9\.*x* and 2\.2\.*x* changes to the AWS Encryption CLI    Adds the `--decrypt-unsigned` parameter\. For details, see [Version 2\.2\.*x*](about-versions.md#version2.2.x)\.   Adds the `--buffer` parameter\. For details, see [Version 2\.2\.*x*](about-versions.md#version2.2.x)\.   Adds the `--max-encrypted-data-keys` parameter\. For details, see [Limit encrypted data keys](configure.md#config-limit-keys)\.     Version 3\.0\.*x* changes to the AWS Encryption CLI   Adds support for AWS KMS multi\-Region keys\. For details, see [Use multi\-Region AWS KMS keys](configure.md#config-mrks)\.   ](crypto-cli-versions.md)\.  
New security features were originally released in AWS Encryption CLI versions 1\.7\.*x* and 2\.0\.*x*\. However, AWS Encryption CLI version 1\.8\.*x* replaces version 1\.7\.*x* and AWS Encryption CLI 2\.1\.*x* replaces 2\.0\.*x*\. For details, see the relevant [security advisory](https://github.com/aws/aws-encryption-sdk-cli/security/advisories/GHSA-2xwp-m7mq-7q3r) in the [aws\-encryption\-sdk\-cli](https://github.com/aws/aws-encryption-sdk-cli/) repository on GitHub\.

**New users**  
If you're new to the AWS Encryption SDK, start with the latest version of the AWS Encryption SDK for your programming language\. The default values enable all security features of the AWS Encryption SDK, including encryption with signing, key derivation, and [key commitment](concepts.md#key-commitment)\.

**Current users**  
We recommend that you upgrade from your current version to the newer versions as soon as possible\. Version 2\.0\.*x* of the AWS Encryption SDK provides new security features to help protect your data\. All future releases, and their improvements, will build on this version\.  
However, version 2\.0\.*x* of the AWS Encryption SDK includes breaking changes that are not backwards compatible\. To assure a safe transition, begin by migrating from your current version to version 1\.7\.*x*\. When version 1\.7\.*x* is fully deployed and operating successfully, you can safely migrate to version 2\.0\.*x*\. This [two\-step process](migration-guide.md) is critical especially for distributed applications\.

For more information about the AWS Encryption SDK security features that underlie these changes, see [Improved client\-side encryption: Explicit KeyIds and key commitment](http://aws.amazon.com/blogs/security/improved-client-side-encryption-explicit-keyids-and-key-commitment/) in the *AWS Security Blog*\.

**Topics**
+ [How to migrate and deploy the AWS Encryption SDK](migration-guide.md)
+ [Updating AWS KMS master key providers](migrate-mkps-v2.md)
+ [Updating AWS KMS keyrings](migrate-keyrings-v2.md)
+ [Setting your commitment policy](migrate-commitment-policy.md)
+ [Troubleshooting migration to version 2\.0\.*x*](troubleshooting-migration.md)